{% extends 'base.html' %}

{% block title %}Customer Dashboard - Supermart{% endblock %}

{% block content %}
<div class="container">
    <div class="dashboard">
        <h1>Customer Dashboard</h1>
        <p>Welcome, {{ user.get_full_name }}!</p>

        {% if cart %}
            <div class="dashboard-card">
                <h3>Your Cart</h3>
                <ul class="cart-list">
                    {% for item in cart.items.all %}
                    <li>
                        <strong>{{ item.product.name }}</strong> - 
                        ₹{{ item.product.price }} x {{ item.quantity }}
                    </li>
                    {% endfor %}
                </ul>
                <a href="{% url 'checkout' %}" class="btn btn-primary">Proceed to Checkout</a>
            </div>
        {% else %}
            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <h3>Recent Orders</h3>
                    {% if recent_orders %}
                        <ul class="order-list">
                            {% for order in recent_orders %}
                            <li>
                                <strong>{{ order.order_id }}</strong> - 
                                ₹{{ order.total_amount }} - 
                                <span class="badge badge-{{ order.order_status|lower }}">{{ order.order_status }}</span>
                            </li>
                            {% endfor %}
                        </ul>
                        <a href="{% url 'order_history' %}" class="btn btn-secondary">View All Orders</a>
                    {% else %}
                        <p>No orders yet.</p>
                        <a href="{% url 'products_list' %}" class="btn btn-primary">Start Shopping</a>
                    {% endif %}
                </div>

                <div class="dashboard-card">
                    <h3>Quick Actions</h3>
                    <div class="action-buttons">
                        <a href="{% url 'products_list' %}" class="btn btn-primary btn-block">Browse Products</a>
                        <a href="{% url 'cart_view' %}" class="btn btn-secondary btn-block">View Cart</a>
                        <a href="{% url 'customer_profile' %}" class="btn btn-secondary btn-block">Edit Profile</a>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
